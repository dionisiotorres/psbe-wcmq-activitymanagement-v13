<?xml version="1.0" encoding="utf-8"?>
<odoo>

<record id="view_partner_form" model="ir.ui.view">
    <field name="name">res.partner.wcmq.base.inherit.form</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_form"/>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="attributes">
            <attribute name="attrs">{'invisible': [('is_company', '=', False)]}</attribute>
        </xpath>
        <xpath expr="//field[@name='name']" position="after">
            <div class="o_row"
                attrs="{
                    'invisible': [
                        '|',
                        ('is_company', '=', True),
                        ('type', '!=', 'contact')
                    ]
                }"
            >
                <field name="firstname" placeholder="First name"
                    attrs="{
                        'required': [
                            ('is_company', '=', False),
                            ('type', '=', 'contact')
                        ]
                    }"
                />
                <field name="middlename" placeholder="Middle name"/>
                <field name="lastname" placeholder="Last name"
                    attrs="{
                        'required': [
                            ('is_company', '=', False),
                            ('type', '=', 'contact')
                        ]
                    }"
                />
            </div>
        </xpath>
        <xpath expr="//field[@name='parent_id']/.." position="after">
            <div class="o_row">
                <field name="edu_partner_id" placeholder="'School / University"
                    attrs="{
                        'invisible': [('is_company', '=', True)]
                    }"
                    domain="[
                        ('is_company', '=', True),
                        ('edu_validated', '=', True)
                    ]"
                    options="{
                        'no_create': True,
                        'no_create_edit': True,
                        'no_edit': True
                    }"
                />
            </div>
        </xpath>
        <xpath expr="//field[@name='company_type']" position="after">
            <div class="o_row">
                <label for="edu_validated" string="School / University validated"/>
                <field name="edu_validated"
                    attrs="{
                        'invisible': [('is_company', '=', False)]
                    }"
                />
            </div>
        </xpath>
        <xpath expr="//field[@name='function']" position="before">
            <field name="expected_graduation_year"
                attrs="{
                    'invisible': [('is_company', '=', True)]
                }"
            />
        </xpath>
        <!-- Contacts -->
        <xpath expr="//field[@name='child_ids']/form//field[@name='name']" position="attributes">
            <attribute name="attrs">{'invisible': [('type', '=', 'contact')]}</attribute>
        </xpath>
        <xpath expr="//field[@name='child_ids']/form//field[@name='name']" position="after">
            <field name="firstname" placeholder="First name"
                attrs="{
                    'required': [
                        ('type', '=', 'contact')
                    ],
                    'invisible': [
                        ('type', '!=', 'contact')
                    ]
                }"
            />
            <field name="middlename" placeholder="Middle name"
                attrs="{
                'invisible': [
                    ('type', '!=', 'contact')
                ]
                }"
            />
            <field name="lastname" placeholder="Last name"
                attrs="{
                    'required': [
                        ('type', '=', 'contact')
                    ],
                    'invisible': [
                        ('type', '!=', 'contact')
                    ]
                }"
            />
        </xpath>
    </field>
</record>

<record id="view_partner_simple_form" model="ir.ui.view">
    <field name="name">res.partner.wcmq.base.simplified.form</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_simple_form"/>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="attributes">
            <attribute name="attrs">{'invisible': [('is_company', '=', False)]}</attribute>
        </xpath>
        <xpath expr="//field[@name='name']" position="after">
            <div class="o_row"
                attrs="{
                    'invisible': [
                        '|',
                        ('is_company', '=', True),
                        ('type', '!=', 'contact')
                    ]
                }"
            >
                <field name="firstname" placeholder="First name"
                    attrs="{
                        'required': [
                            '|',
                            ('is_company', '=', False),
                            ('type', '=', 'contact')
                        ]
                    }"
                />
                <field name="middlename" placeholder="Middle name"/>
                <field name="lastname" placeholder="Last name"
                    attrs="{
                        'required': [
                            '|',
                            ('is_company', '=', False),
                            ('type', '=', 'contact')
                        ]
                    }"
                />
            </div>
        </xpath>
    </field>
</record>

<record id="view_partner_short_form" model="ir.ui.view">
    <field name="name">res.partner.wcmq.base.inherit.short.form</field>
    <field name="model">res.partner</field>
    <field name="inherit_id" ref="base.view_partner_short_form"/>
    <field name="arch" type="xml">
        <xpath expr="//field[@name='name']" position="attributes">
            <attribute name="attrs">{'invisible': [('is_company', '=', False)]}</attribute>
        </xpath>
        <xpath expr="//field[@name='name']" position="after">
            <div class="o_row"
                attrs="{
                    'invisible': [
                        '|',
                        ('is_company', '=', True),
                        ('type', '!=', 'contact')
                    ]
                }"
            >
                <field name="firstname" placeholder="First name"
                    attrs="{
                        'required': [
                            '|',
                            ('is_company', '=', False),
                            ('type', '=', 'contact')
                        ]
                    }"
                />
                <field name="middlename" placeholder="Middle name"/>
                <field name="lastname" placeholder="Last name"
                    attrs="{
                        'required': [
                            '|',
                            ('is_company', '=', False),
                            ('type', '=', 'contact')
                        ]
                    }"
                />
            </div>
        </xpath>
    </field>
</record>

</odoo>
